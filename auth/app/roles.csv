allow, /, public, main entry point
allow, /ui*, public, user interface
allow, /static/*, public, Static assets
allow, /favicon.ico, public, make browser happy

allow, /photos/api/albums, public, Public album list
allow, /photos/api/photos/srcset, public, Srcset for images
allow, /photos/api/albums/*, !photos:8000, Delegate album access to photos service
allow, /photos/api/photos/*, !photos:8000, Delegate photo access to photos service
allow, /photos/api/reload-db, admin, Reload photos database

allow, /doc/api/root, public, List of folders user is permitted to view
allow, /doc/api/folder/*, !doc:8000, Delegate folder listing to doc service
allow, /doc/api/file/*, !doc:8000, Delegate file access to doc service

allow, /auth/firebase-config, public
allow, /auth/login*, public, Login page
allow, /auth/logout*, public, Logout endpoint
allow, /auth/me, public, User info endpoint
allow, /auth/users*, admin, User management
allow, /auth/roles-csv, admin, Testing

allow, */health, admin, Health checks (auth, doc, photos, nginx)
allow, */docs, admin, Swagger docs for all services
allow, */redoc, admin, openapi docs for all services
allow, *openapi.json, admin, OpenAPI schema for all services

# HACK: traefik dashboard is served at traefik subdomain.
# A better solution would be a separate /authorization endpoint for the traefik subdomain that verifies the admin role.
# But this works and the routes are sufficiently specific to not pose a great security risk.
# (the root domain serves nothing on these routes).
allow, /assets/*, admin, Traefik dashboard
allow, /icons/*, admin, Traefik dashboard
allow, /app-*, admin, Traefik dashboard
allow, /api/*, admin, Traefik dashboard
allow, /providers/*, admin, Traefik dashboard

