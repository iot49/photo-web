<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photos API Image Scale Testing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h2 {
            color: #555;
            margin-top: 0;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .image-item {
            text-align: center;
            border: 1px solid #eee;
            padding: 10px;
            border-radius: 5px;
        }
        .image-item img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
        }
        .image-item h3 {
            margin: 10px 0 5px 0;
            font-size: 14px;
            color: #666;
        }
        .url-display {
            font-family: monospace;
            font-size: 12px;
            color: #888;
            word-break: break-all;
            margin-top: 5px;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Photos API Image Scale Testing</h1>
        <p>Testing the <code>/api/photo/{photo_uuid}/image</code> endpoint with different scale parameters.</p>
        <p><strong>Test Photo UUID:</strong> <code>DD204DB3-2A88-4082-8546-1C2836A6EBBD</code></p>

        <div class="test-section">
            <h2>Original Size (no scaling)</h2>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Original Image</h3>
                    <img id="original" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image" alt="Original image" onload="updateStatus('original', 'loaded')" onerror="updateStatus('original', 'error')">
                    <div class="url-display">https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image</div>
                    <div id="original-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=0 (same as original)</h3>
                    <img id="width0" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=0" alt="Width=0" onload="updateStatus('width0', 'loaded')" onerror="updateStatus('width0', 'error')">
                    <div class="url-display">https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=0</div>
                    <div id="width0-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Width-based Scaling</h2>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Width=100px</h3>
                    <img id="width100" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=100" alt="Width=100" onload="updateStatus('width100', 'loaded')" onerror="updateStatus('width100', 'error')">
                    <div class="url-display">?width=100</div>
                    <div id="width100-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=200px</h3>
                    <img id="width200" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=200" alt="Width=200" onload="updateStatus('width200', 'loaded')" onerror="updateStatus('width200', 'error')">
                    <div class="url-display">?width=200</div>
                    <div id="width200-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=400px</h3>
                    <img id="width400" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=400" alt="Width=400" onload="updateStatus('width400', 'loaded')" onerror="updateStatus('width400', 'error')">
                    <div class="url-display">?width=400</div>
                    <div id="width400-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=800px</h3>
                    <img id="width800" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=800" alt="Width=800" onload="updateStatus('width800', 'loaded')" onerror="updateStatus('width800', 'error')">
                    <div class="url-display">?width=800</div>
                    <div id="width800-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=2000px</h3>
                    <img id="width2000" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000" alt="Width=2000" onload="updateStatus('width2000', 'loaded')" onerror="updateStatus('width2000', 'error')">
                    <div class="url-display">?width=2000</div>
                    <div id="width2000-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=10000px</h3>
                    <img id="width10000" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=10000" alt="Width=10000" onload="updateStatus('width10000', 'loaded')" onerror="updateStatus('width10000', 'error')">
                    <div class="url-display">?width=10000</div>
                    <div id="width10000-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Height-based Scaling</h2>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Height=100px</h3>
                    <img id="height100" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?height=100" alt="Height=100" onload="updateStatus('height100', 'loaded')" onerror="updateStatus('height100', 'error')">
                    <div class="url-display">?height=100</div>
                    <div id="height100-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Height=200px</h3>
                    <img id="height200" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?height=200" alt="Height=200" onload="updateStatus('height200', 'loaded')" onerror="updateStatus('height200', 'error')">
                    <div class="url-display">?height=200</div>
                    <div id="height200-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Height=400px</h3>
                    <img id="height400" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?height=400" alt="Height=400" onload="updateStatus('height400', 'loaded')" onerror="updateStatus('height400', 'error')">
                    <div class="url-display">?height=400</div>
                    <div id="height400-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Combined Width & Height Scaling</h2>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Width=300, Height=200</h3>
                    <img id="both1" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=300&height=200" alt="Width=300, Height=200" onload="updateStatus('both1', 'loaded')" onerror="updateStatus('both1', 'error')">
                    <div class="url-display">?width=300&height=200</div>
                    <div id="both1-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=200, Height=300</h3>
                    <img id="both2" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=200&height=300" alt="Width=200, Height=300" onload="updateStatus('both2', 'loaded')" onerror="updateStatus('both2', 'error')">
                    <div class="url-display">?width=200&height=300</div>
                    <div id="both2-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=1, Height=300</h3>
                    <img id="both3" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=1&height=300" alt="Width=1, Height=300" onload="updateStatus('both3', 'loaded')" onerror="updateStatus('both3', 'error')">
                    <div class="url-display">?width=1&height=300</div>
                    <div id="both3-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Quality Testing</h2>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Width=2000, Quality=2</h3>
                    <img id="quality2" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000&quality=2" alt="Quality=2" onload="updateStatus('quality2', 'loaded')" onerror="updateStatus('quality2', 'error')">
                    <div class="url-display">?width=2000&quality=10</div>
                    <div id="quality2-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=2000, Quality=10</h3>
                    <img id="quality10" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000&quality=10" alt="Quality=10" onload="updateStatus('quality10', 'loaded')" onerror="updateStatus('quality10', 'error')">
                    <div class="url-display">?width=2000&quality=10</div>
                    <div id="quality10-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=2000, Quality=50</h3>
                    <img id="quality50" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000&quality=50" alt="Quality=50" onload="updateStatus('quality50', 'loaded')" onerror="updateStatus('quality50', 'error')">
                    <div class="url-display">?width=2000&quality=50</div>
                    <div id="quality50-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=2000, Quality=85</h3>
                    <img id="quality85" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000&quality=85" alt="Quality=85" onload="updateStatus('quality85', 'loaded')" onerror="updateStatus('quality85', 'error')">
                    <div class="url-display">?width=2000&quality=85</div>
                    <div id="quality85-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Width=2000, Quality=100</h3>
                    <img id="quality100" src="https://dev49.org/photos/api/photo/DD204DB3-2A88-4082-8546-1C2836A6EBBD/image?width=2000&quality=100" alt="Quality=100" onload="updateStatus('quality100', 'loaded')" onerror="updateStatus('quality100', 'error')">
                    <div class="url-display">?width=2000&quality=100</div>
                    <div id="quality100-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Additional Test Photos</h2>
            <p>Testing with other photo UUIDs to ensure consistency:</p>
            <div class="image-grid">
                <div class="image-item">
                    <h3>Photo 2 (Width=200)</h3>
                    <img id="photo2" src="https://dev49.org/photos/api/photo/AF587B1E-54E4-485E-B2C9-44C7C4091E5E/image?width=200" alt="Photo 2" onload="updateStatus('photo2', 'loaded')" onerror="updateStatus('photo2', 'error')">
                    <div class="url-display">AF587B1E-54E4-485E-B2C9-44C7C4091E5E</div>
                    <div id="photo2-status" class="loading">Loading...</div>
                </div>
                <div class="image-item">
                    <h3>Photo 3 (Width=200)</h3>
                    <img id="photo3" src="https://dev49.org/photos/api/photo/55D6CA9B-E48D-40EC-BCAD-34CAC08B623E/image?width=200" alt="Photo 3" onload="updateStatus('photo3', 'loaded')" onerror="updateStatus('photo3', 'error')">
                    <div class="url-display">55D6CA9B-E48D-40EC-BCAD-34CAC08B623E</div>
                    <div id="photo3-status" class="loading">Loading...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateStatus(imageId, status) {
            const statusElement = document.getElementById(imageId + '-status');
            const imgElement = document.getElementById(imageId);
            
            if (status === 'loaded') {
                statusElement.textContent = `✅ Loaded (${imgElement.naturalWidth}x${imgElement.naturalHeight})`;
                statusElement.className = '';
            } else if (status === 'error') {
                statusElement.textContent = '❌ Failed to load';
                statusElement.className = 'error';
            }
        }

        // Add some debugging info
        window.addEventListener('load', function() {
            console.log('Test page loaded. All images should start loading now.');
            
            // Log any network errors
            window.addEventListener('error', function(e) {
                if (e.target.tagName === 'IMG') {
                    console.error('Image failed to load:', e.target.src);
                }
            }, true);
        });
    </script>
</body>
</html>